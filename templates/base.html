<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Chinmay Chaudhari | Portfolio</title>
    <link href="https://fonts.googleapis.com/css2?family=Plus+Jakarta+Sans:wght@300;400;700;800&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://unpkg.com/aos@next/dist/aos.css" />
    <link rel="stylesheet" href="{{ url_for('static', filename='style.css') }}">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    
    <link rel="icon" type="image/png" href="{{ url_for('static', filename='logo.png') }}">
    
    <script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r128/three.min.js"></script>
    <script src="https://cdn.jsdelivr.net/gh/studio-freight/lenis@1.0.19/bundled/lenis.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.2/gsap.min.js"></script>
    <script src="https://unpkg.com/typed.js@2.0.16/dist/typed.umd.js"></script>
</head>
<body>
    <div class="cursor-dot"></div>
    <div class="cursor-outline"></div>
    <canvas id="bg-canvas"></canvas>

    <nav>
    <div class="logo">Chinmay<span class="cosmic-glow"> Chaudhari.</span></div>
    <div class="nav-links">
        <a href="/" class="nav-item">Home</a>
        <a href="#projects" class="nav-item">Projects</a>
        <a href="#contact" class="nav-item">Contact</a>
    </div>
</nav>

    {% block content %}{% endblock %}

    <script src="https://unpkg.com/aos@next/dist/aos.js"></script>
    <script>
        // 1. Smooth Scroll (Lenis)
        const lenis = new Lenis();
        function raf(time) { lenis.raf(time); requestAnimationFrame(raf); }
        requestAnimationFrame(raf);

        // 2. Magnetic Cursor
        const dot = document.querySelector(".cursor-dot");
        const outline = document.querySelector(".cursor-outline");
        window.addEventListener("mousemove", (e) => {
            gsap.to(dot, { x: e.clientX, y: e.clientY, duration: 0.1 });
            gsap.to(outline, { x: e.clientX, y: e.clientY, duration: 0.3 });
        });

        // 3. Three.js Cosmic Space Engine
        const scene = new THREE.Scene();
        const camera = new THREE.PerspectiveCamera(75, window.innerWidth / window.innerHeight, 0.1, 1000);
        const renderer = new THREE.WebGLRenderer({ canvas: document.querySelector('#bg-canvas'), alpha: true, antialias: true });
        renderer.setSize(window.innerWidth, window.innerHeight);

        // Starfield
        const starGeometry = new THREE.BufferGeometry();
        const starMaterial = new THREE.PointsMaterial({ color: 0xffffff, size: 0.8 });
        const starVertices = [];
        for (let i = 0; i < 6000; i++) {
            starVertices.push((Math.random()-0.5)*2000, (Math.random()-0.5)*2000, -Math.random()*2000);
        }
        starGeometry.setAttribute('position', new THREE.Float32BufferAttribute(starVertices, 3));
        const stars = new THREE.Points(starGeometry, starMaterial);
        scene.add(stars);

        // Floating Crystals (Tetrahedrons)
        const crystals = new THREE.Group();
        for(let i=0; i<35; i++) {
            const geom = new THREE.TetrahedronGeometry(Math.random() * 1.5);
            const mat = new THREE.MeshStandardMaterial({ color: 0x38bdf8, wireframe: true, transparent: true, opacity: 0.4 });
            const mesh = new THREE.Mesh(geom, mat);
            mesh.position.set((Math.random()-0.5)*120, (Math.random()-0.5)*120, (Math.random()-0.5)*120);
            mesh.rotation.set(Math.random(), Math.random(), Math.random());
            crystals.add(mesh);
        }
        scene.add(crystals);

        // Main Animated Torus
        const geometry = new THREE.TorusGeometry(10, 3, 20, 100);
        const material = new THREE.MeshStandardMaterial({ color: 0x38bdf8, wireframe: true, emissive: 0x0ea5e9, emissiveIntensity: 0.5 });
        const torus = new THREE.Mesh(geometry, material);
        scene.add(torus);
        
        const light = new THREE.PointLight(0xffffff, 1.2);
        light.position.set(20, 20, 20);
        scene.add(light, new THREE.AmbientLight(0xffffff, 0.4));
        camera.position.z = 40;

        // Interaction
        let mouseX = 0, mouseY = 0;
        window.addEventListener('mousemove', (e) => {
            mouseX = (e.clientX - window.innerWidth/2) / 150;
            mouseY = (e.clientY - window.innerHeight/2) / 150;
        });

        function animate() {
            requestAnimationFrame(animate);
            torus.rotation.x += 0.004;
            torus.rotation.y += 0.006;
            stars.rotation.y += 0.0001;
            crystals.children.forEach(c => { c.rotation.x += 0.01; c.rotation.y += 0.01; });
            gsap.to(scene.rotation, { y: mouseX, x: mouseY, duration: 2 });
            renderer.render(scene, camera);
        }
        animate();

        // 4. Typing & Entrance
        AOS.init({ duration: 1000 });
        new Typed('#typed', {
            strings: ['Data Analyst', 'Data Engineer', 'UI/UX Designer'],
            typeSpeed: 60, backSpeed: 40, loop: true
        });
    </script>
</body>
</html>